<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AIV Systems Debugging Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f0f0f0;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      text-align: center;
    }
    .instructions {
      background-color: #EFF6FF;
      border-left: 4px solid #4F46E5;
      padding: 15px;
      margin: 20px 0;
      border-radius: 0 4px 4px 0;
    }
    .step {
      margin-bottom: 20px;
      padding: 15px;
      border-left: 4px solid #10B981;
      background-color: #F0FDF4;
    }
    .step h3 {
      margin-top: 0;
      color: #047857;
    }
    .tip {
      background-color: #FEF3C7;
      border-left: 4px solid #D97706;
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 4px 4px 0;
    }
    code {
      background-color: #1e1e1e;
      color: #d4d4d4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>AIV Systems Debugging Demo</h1>
    
    <div class="instructions">
      <h2>How to Debug Your Chrome Extension</h2>
      <p>This page explains how to debug your AIV Systems Chrome Extension when it's not working as expected.</p>
    </div>
    
    <div class="step">
      <h3>Step 1: Debug the Extension Popup</h3>
      <p><strong>Right-click</strong> the AIV Systems extension icon in your Chrome toolbar and select <strong>"Inspect"</strong>.</p>
      <p>This opens Developer Tools specifically for the popup where you can:</p>
      <ul>
        <li>See console.log() messages from popup.js</li>
        <li>Set breakpoints in your JavaScript code</li>
        <li>Inspect HTML elements</li>
        <li>Monitor network requests</li>
      </ul>
    </div>
    
    <div class="step">
      <h3>Step 2: Debug Content Scripts (This Page)</h3>
      <p>Press <strong>F12</strong> or <strong>Ctrl+Shift+I</strong> to open Developer Tools on this page.</p>
      <p>In the <strong>Console</strong> tab, you can see messages from content scripts:</p>
      <ul>
        <li>Look for "AIV Systems Content Script loaded"</li>
        <li>Watch for processing messages when you interact with the page</li>
        <li>See any errors that occur</li>
      </ul>
    </div>
    
    <div class="step">
      <h3>Step 3: Debug Background Scripts</h3>
      <p>Go to <code>chrome://extensions</code> and enable <strong>"Developer mode"</strong>.</p>
      <p>Find your AIV Systems extension and click <strong>"Inspect views"</strong> next to the background page.</p>
      <p>This shows you:</p>
      <ul>
        <li>Messages received from content scripts</li>
        <li>Firebase communication attempts</li>
        <li>Any background script errors</li>
      </ul>
    </div>
    
    <div class="step">
      <h3>Step 4: Use the New Debug Panel</h3>
      <p>When you visit AI chat platforms like chat.openai.com, a debug panel will appear in the top-right corner.</p>
      <p>The panel includes:</p>
      <ul>
        <li><strong>Real-time logs</strong> from the extension</li>
        <li><strong>Test Detection</strong> button to check message finding</li>
        <li><strong>Test User Msg</strong> button to send a test user message</li>
        <li><strong>Test Assistant Msg</strong> button to send a test AI response</li>
        <li><strong>Clear Logs</strong> button to reset the panel</li>
      </ul>
    </div>
    
    <div class="tip">
      <h3>Pro Tip: Test the Extension Here</h3>
      <p>Try clicking the AIV Systems extension icon now and toggle validation ON.</p>
      <p>Then check this page's console (F12 â†’ Console tab) for debug messages.</p>
      <p>You should see the debug panel appear in the top-right corner of this page.</p>
    </div>
    
    <div class="step">
      <h3>Common Debugging Commands</h3>
      <p>In any console, you can run these commands:</p>
      <code>chrome.storage.local.get(['aivValidationEnabled'], console.log);</code>
      <p>Check if validation is enabled</p>
      
      <br>
      
      <code>chrome.runtime.sendMessage({action: 'testMessages'});</code>
      <p>Test message detection</p>
      
      <br>
      
      <code>chrome.runtime.sendMessage({
  action: 'captureInteraction',
  data: {
    role: 'assistant',
    content: 'Test message',
    timestamp: new Date().toISOString(),
    url: window.location.href,
    platform: 'debug'
  }
});</code>
      <p>Send a test message to the extension</p>
    </div>
    
    <div class="tip">
      <h3>Remember These Key Points</h3>
      <ul>
        <li><strong>Always open Developer Tools first</strong> before testing the extension</li>
        <li><strong>Refresh the page</strong> after making changes to the extension</li>
        <li><strong>Check all three debugging locations</strong> (Popup, Content, Background)</li>
        <li><strong>Look for the debug panel</strong> on AI chat pages</li>
      </ul>
    </div>
  </div>
  
  <script>
    // This script demonstrates how content scripts can communicate with the extension
    console.log('AIV Systems Debug Demo Page loaded');
    console.log('Open Developer Tools (F12) to see this message');
    console.log('The debug panel should appear in the top-right corner');
    
    // Try to communicate with the extension if it's installed
    try {
      if (typeof chrome !== 'undefined' && chrome.runtime) {
        console.log('Chrome runtime detected - extension may be installed');
      }
    } catch (e) {
      console.log('Chrome runtime not available');
    }
  </script>
</body>
</html>