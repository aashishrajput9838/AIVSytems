<!DOCTYPE html>
<html>
<head>
    <title>Test Duplicate Prevention</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-container {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .question {
            background-color: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .response {
            background-color: #f3e5f5;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        .results {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Test Duplicate Prevention</h1>
    
    <div class="test-container">
        <h2>Simulated Chat Interface</h2>
        <div id="chat-container">
            <div class="question">
                <strong>Q:</strong> What is the Taj Mahal?
            </div>
            <div class="response">
                <strong>A:</strong> The Taj Mahal is a famous monument in India, located in Agra. It is a white marble mausoleum built by Mughal Emperor Shah Jahan in memory of his wife Mumtaz Mahal.
            </div>
            <div class="question">
                <strong>Q:</strong> What is the Taj Mahal?
            </div>
            <div class="response">
                <strong>A:</strong> The Taj Mahal is a famous monument in India, located in Agra. It is a white marble mausoleum built by Mughal Emperor Shah Jahan in memory of his wife Mumtaz Mahal.
            </div>
            <div class="question">
                <strong>Q:</strong> What is the Taj Mahal?
            </div>
            <div class="response">
                <strong>A:</strong> The Taj Mahal is a famous monument in India, located in Agra. It is a white marble mausoleum built by Mughal Emperor Shah Jahan in memory of his wife Mumtaz Mahal.
            </div>
        </div>
        
        <button onclick="simulateNewQuestion()">Add New Question</button>
        <button onclick="simulateDuplicateQuestion()">Add Duplicate Question</button>
        <button onclick="clearChat()">Clear Chat</button>
    </div>
    
    <div class="results">
        <h2>Expected Behavior</h2>
        <p>After implementing the duplicate prevention:</p>
        <ul>
            <li>Only one "What is the Taj Mahal?" question-response pair should appear in the extension popup</li>
            <li>Adding new unique questions should work normally</li>
            <li>Adding duplicate questions should be ignored</li>
        </ul>
    </div>
    
    <div class="results">
        <h2>Testing Instructions</h2>
        <ol>
            <li>Load this HTML file in your browser</li>
            <li>Enable the AIV Systems extension</li>
            <li>Open the extension popup and check the conversation pairs</li>
            <li>Click "Add Duplicate Question" multiple times - should not create duplicates</li>
            <li>Click "Add New Question" - should add a new pair</li>
            <li>Check the popup again to verify correct behavior</li>
        </ol>
    </div>

    <script>
        function simulateNewQuestion() {
            const chatContainer = document.getElementById('chat-container');
            
            // Add a new unique question
            const questionTime = new Date().toISOString();
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `<strong>Q:</strong> What is the capital of France? <small>(${questionTime})</small>`;
            
            const responseDiv = document.createElement('div');
            responseDiv.className = 'response';
            responseDiv.innerHTML = `<strong>A:</strong> The capital of France is Paris.`;
            
            chatContainer.appendChild(questionDiv);
            chatContainer.appendChild(responseDiv);
        }
        
        function simulateDuplicateQuestion() {
            const chatContainer = document.getElementById('chat-container');
            
            // Add the same question again
            const questionTime = new Date().toISOString();
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `<strong>Q:</strong> What is the Taj Mahal? <small>(${questionTime})</small>`;
            
            const responseDiv = document.createElement('div');
            responseDiv.className = 'response';
            responseDiv.innerHTML = `<strong>A:</strong> The Taj Mahal is a famous monument in India, located in Agra. It is a white marble mausoleum built by Mughal Emperor Shah Jahan in memory of his wife Mumtaz Mahal.`;
            
            chatContainer.appendChild(questionDiv);
            chatContainer.appendChild(responseDiv);
        }
        
        function clearChat() {
            const chatContainer = document.getElementById('chat-container');
            chatContainer.innerHTML = '';
        }
    </script>
</body>
</html>